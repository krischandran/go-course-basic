<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Константы и iota</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
          integrity="sha512-Jk4AqjWsdSzSWCSuQTfYRIF84Rq/eV0G2+tu07byYwHcbTGfdmLrHjUSwvzp5HvbiqK4ibmNwdcG49Y5RGYPTg=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"
            integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"
            integrity="sha512-5fby2A9Cgu49xHMsMCsKPBRMIlKPVXO/WBYvpWpQJpJH3lFJ4oEiJBWqVIXqXk6hqPoHpsBwQqEYbLhnL8IWCg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>

    <style>
        :root {
            --bg-primary: #070709;
            --bg-secondary: #0d0d0f;
            --bg-tertiary: #111113;
            --text-primary: #ffffff;
            --text-secondary: #dddddd;
            --text-muted: #a7a7a7;
            --border-color: #1a1a1c;
            --border-light: #363636;
            --accent-green: #2af16b;
            --accent-orange: #f1a12a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 15px;
            line-height: 1.65;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            padding: 0 env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            -webkit-font-smoothing: antialiased;
        }

        main {
            max-width: 100%;
            padding: 16px;
            padding-bottom: calc(24px + env(safe-area-inset-bottom));
        }

        .module-badge {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        h1 {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.2;
            margin-bottom: 16px;
        }

        h2 {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin: 32px 0 16px;
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 24px 0 12px;
        }

        .lead {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        p {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            background: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--accent-green);
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        .code-block {
            margin: 20px 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .code-lang {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
        }

        .copy-btn {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 4px 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        .copy-btn.copied {
            border-color: var(--accent-green);
            background: rgba(42, 241, 107, 0.1);
            color: var(--accent-green);
        }

        .code-block pre {
            padding: 16px;
            overflow-x: auto;
            font-size: 14px;
            line-height: 1.5;
        }

        blockquote {
            margin: 20px 0;
            padding: 16px 20px;
            background: linear-gradient(90deg, rgba(42, 241, 107, 0.06) 0%, transparent 100%);
            border-left: 2px solid var(--accent-green);
            border-radius: 0 6px 6px 0;
        }

        blockquote p {
            font-size: 15px;
            font-weight: 500;
            font-style: italic;
            color: var(--text-primary);
            margin: 0;
        }

        .alert {
            margin: 24px 0;
            padding: 16px 20px 16px 44px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .alert-icon {
            position: absolute;
            left: 14px;
            top: 14px;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .alert-tip .alert-icon {
            background: rgba(42, 241, 107, 0.15);
            color: var(--accent-green);
        }

        .alert-important .alert-icon {
            background: rgba(241, 161, 42, 0.15);
            color: var(--accent-orange);
        }

        .alert-label {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 6px;
        }

        .alert-tip .alert-label { color: var(--accent-green); }
        .alert-important .alert-label { color: var(--accent-orange); }

        .alert p {
            margin: 0;
            font-size: 14px;
        }

        table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            background: var(--bg-secondary);
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        td {
            padding: 12px 16px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .card {
            margin: 16px 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .card-head {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .card-num {
            flex-shrink: 0;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 700;
        }

        .question-card .card-num {
            background: linear-gradient(135deg, rgba(42, 241, 107, 0.2) 0%, rgba(42, 241, 107, 0.05) 100%);
            color: var(--accent-green);
        }

        .task-card .card-num {
            background: linear-gradient(135deg, rgba(241, 161, 42, 0.2) 0%, rgba(241, 161, 42, 0.05) 100%);
            color: var(--accent-orange);
        }

        .card-title {
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .card-body {
            padding: 16px;
        }

        .card-body .code-block {
            margin: 0 0 16px 0;
        }

        details {
            margin-top: 12px;
        }

        summary {
            font-size: 14px;
            font-weight: 500;
            color: var(--accent-green);
            cursor: pointer;
            padding: 10px 16px;
            background: rgba(42, 241, 107, 0.06);
            border-radius: 6px;
            list-style: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        summary::before {
            content: '▶';
            font-size: 10px;
            transition: transform 0.2s;
        }

        details[open] summary::before {
            transform: rotate(90deg);
        }

        summary::-webkit-details-marker { display: none; }

        .answer {
            padding: 16px;
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .answer p {
            margin-bottom: 8px;
        }

        .answer p:last-child {
            margin-bottom: 0;
        }

        .answer .code-block {
            margin: 12px 0;
        }

        .nav-footer {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-decoration: none;
            transition: border-color 0.2s;
        }

        .nav-link:hover {
            border-color: var(--border-light);
        }

        .nav-link.prev { text-align: left; }
        .nav-link.next { justify-content: flex-end; text-align: right; }

        .nav-arrow {
            font-size: 20px;
            color: var(--text-muted);
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .nav-title {
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
        }

        ul, ol {
            margin: 16px 0;
            padding-left: 24px;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        strong {
            color: var(--text-primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <main>
        <div class="module-badge">Модуль 1 / Урок 5</div>
        <h1>Константы и iota</h1>
        <p class="lead">Константы - это значения, которые не изменяются. Они вычисляются на этапе компиляции, что делает их быстрее и безопаснее переменных.</p>

        <!-- H2 #1 -->
        <h2 id="why-constants">Зачем нужны константы?</h2>

        <h3 id="protection">Защита от случайного изменения</h3>

        <!-- Code block #1 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">// Переменная - можно случайно изменить
var maxRetries = 3
// ... 100 строк кода ...
maxRetries = 0  // Ой! Кто-то сломал логику ретраев

// Константа - невозможно изменить
const maxRetries = 3
// maxRetries = 0  // ❌ Ошибка компиляции</code></pre>
        </div>

        <h3 id="optimization">Оптимизация компилятора</h3>

        <p>Константы вычисляются на этапе компиляции, не во время выполнения:</p>

        <!-- Code block #2 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const size = 1024 * 1024 * 100  // Вычисляется при компиляции

// Компилятор подставляет готовое значение 104857600
// Нет затрат на вычисление в runtime</code></pre>
        </div>

        <h3 id="documentation">Документирование намерения</h3>

        <p>Когда видишь <code>const</code> - понимаешь: это значение фундаментальное, неизменное, часть контракта.</p>

        <!-- H2 #2 -->
        <h2 id="declaration">Объявление констант</h2>

        <!-- Code block #3 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const Pi = 3.14159
const MaxSize = 100
const AppName = "MyApp"
const IsDebug = true</code></pre>
        </div>

        <p>В отличие от переменных, константы <strong>нельзя изменить</strong> после объявления:</p>

        <!-- Code block #4 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const pi = 3.14159
// pi = 3.14  // ❌ ошибка компиляции</code></pre>
        </div>

        <h3 id="const-type">Тип константы</h3>

        <p>Тип можно указать явно, но обычно это не нужно:</p>

        <!-- Code block #5 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const pi float64 = 3.14159  // с явным типом
const pi = 3.14159          // без типа (untyped constant)</code></pre>
        </div>

        <p>Константы без явного типа (untyped) более гибкие - они подстраиваются под контекст использования.</p>

        <h3 id="untyped-power">Почему untyped константы - это сила Go</h3>

        <!-- Code block #6 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const maxSize = 100  // untyped - адаптируется к контексту

var i int = maxSize       // OK - стал int
var f float64 = maxSize   // OK - стал float64
var i32 int32 = maxSize   // OK - стал int32

// С типизированной константой так не получится:
const typedMax int = 100
var f2 float64 = typedMax  // ❌ Ошибка! int и float64 несовместимы</code></pre>
        </div>

        <p>Untyped константы - как "резиновые" значения, которые адаптируются к нужному типу. Это делает код гибче без потери типобезопасности.</p>

        <h3 id="what-can-store">Что можно хранить в константах?</h3>

        <p>Только скалярные значения:</p>
        <ul>
            <li>Числа (<code>int</code>, <code>float64</code>)</li>
            <li>Строки (<code>string</code>)</li>
            <li>Булевы значения (<code>bool</code>)</li>
        </ul>

        <!-- Code block #7 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const x = 10           // ✅ число
const s = "hello"      // ✅ строка
const b = true         // ✅ bool
// const arr = [3]int{1,2,3}  // ❌ массивы нельзя
// const m = map[string]int{}  // ❌ map нельзя</code></pre>
        </div>

        <!-- H2 #3 -->
        <h2 id="grouping">Группировка констант</h2>

        <p>Для связанных констант используй группу:</p>

        <!-- Code block #8 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    StatusPending  = 0
    StatusActive   = 1
    StatusComplete = 2
    StatusCanceled = 3
)</code></pre>
        </div>

        <h3 id="inheritance">Наследование значений</h3>

        <p>Если константа объявлена без значения, она наследует значение предыдущей:</p>

        <!-- Code block #9 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    a = 1
    b = 5.5
    c        // c = 5.5 (наследует от b)
    d        // d = 5.5
    e = "hi"
    f        // f = "hi"
)</code></pre>
        </div>

        <!-- H2 #4 -->
        <h2 id="iota">iota - автоинкремент</h2>

        <p><code>iota</code> - специальный счётчик для констант. Он начинается с 0 и увеличивается на 1 для каждой строки в блоке <code>const</code>.</p>

        <h3 id="iota-basic">Базовый пример</h3>

        <!-- Code block #10 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    Sunday    = iota  // 0
    Monday           // 1
    Tuesday          // 2
    Wednesday        // 3
    Thursday         // 4
    Friday           // 5
    Saturday         // 6
)</code></pre>
        </div>

        <p>Это эквивалентно:</p>

        <!-- Code block #11 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    Sunday    = 0
    Monday    = 1
    Tuesday   = 2
    // ...
)</code></pre>
        </div>

        <h3 id="iota-skip">Пропуск значения</h3>

        <p>Используй пустой идентификатор <code>_</code> для пропуска первого значения:</p>

        <!-- Code block #12 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    _ = iota  // 0 - пропускаем
    Monday    // 1
    Tuesday   // 2
)</code></pre>
        </div>

        <h3 id="bit-flags">Битовые флаги</h3>

        <p><code>iota</code> отлично подходит для создания битовых флагов:</p>

        <!-- Code block #13 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    FlagRead   = 1 << iota  // 1  (0001)
    FlagWrite              // 2  (0010)
    FlagExec               // 4  (0100)
)

// Комбинация флагов через |
permissions := FlagRead | FlagWrite  // 3 (0011)

// Проверка флага: permissions & FlagRead != 0
hasRead := permissions & FlagRead != 0
fmt.Println(hasRead)  // true</code></pre>
        </div>

        <div class="alert alert-tip">
            <div class="alert-icon">✓</div>
            <div class="alert-label">Tip</div>
            <p>Проверку флагов с помощью <code>if</code> изучим в модуле "Условия".</p>
        </div>

        <h3 id="iota-expressions">Выражения с iota</h3>

        <p><code>iota</code> можно использовать в выражениях - умножать, сдвигать, комбинировать:</p>

        <!-- Code block #14 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    Small  = 10 * (iota + 1)  // 10
    Medium                    // 20
    Large                     // 30
)

const (
    First  = iota * 100 + 1   // 1
    Second                    // 101
    Third                     // 201
)</code></pre>
        </div>

        <h3 id="real-examples">Реальные примеры iota из стандартной библиотеки</h3>

        <p><strong>Размеры файлов (из пакета <code>os</code>):</strong></p>

        <!-- Code block #15 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    _  = iota             // 0 - игнорируем
    KB = 1 << (10 * iota) // 1 << 10 = 1024
    MB                    // 1 << 20 = 1048576
    GB                    // 1 << 30 = 1073741824
    TB                    // 1 << 40
)

fmt.Println(GB)  // 1073741824</code></pre>
        </div>

        <p><strong>HTTP методы (из пакета <code>net/http</code>):</strong></p>

        <!-- Code block #16 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    MethodGet     = "GET"
    MethodPost    = "POST"
    MethodPut     = "PUT"
    MethodDelete  = "DELETE"
)</code></pre>
        </div>

        <h3 id="iota-reset">Сброс iota</h3>

        <p><code>iota</code> сбрасывается в 0 в каждом новом блоке <code>const</code>:</p>

        <!-- Code block #17 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    A = iota  // 0
    B         // 1
)

const (
    C = iota  // 0 (сброс!)
    D         // 1
)</code></pre>
        </div>

        <h3 id="multiple-consts">Несколько констант в одной строке</h3>

        <p><code>iota</code> увеличивается по строкам, не по константам:</p>

        <!-- Code block #18 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const (
    A, B = iota, iota + 10  // A=0, B=10
    C, D                    // C=1, D=11
    E, F                    // E=2, F=12
)</code></pre>
        </div>

        <!-- H2 #5 -->
        <h2 id="typed-enum">Типизированные enum</h2>

        <p>Для типобезопасных перечислений создавай собственный тип:</p>

        <h3 id="numeric-enum">Числовой enum с iota</h3>

        <!-- Code block #19 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">type Status int

const (
    StatusPending Status = iota
    StatusActive
    StatusComplete
)

// Присваивание
var s Status = StatusActive
fmt.Println(s)  // 1

// var s2 Status = 1  ← Ошибка! int и Status - разные типы</code></pre>
        </div>

        <div class="alert alert-tip">
            <div class="alert-icon">✓</div>
            <div class="alert-label">Tip</div>
            <p>Как передавать типизированные enum в функции - изучим в модуле "Функции".</p>
        </div>

        <h3 id="string-enum">String-based enum</h3>

        <p>Для читаемых значений (логи, API) используй строковые константы:</p>

        <!-- Code block #20 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">type Role string

const (
    RoleAdmin  Role = "admin"
    RoleUser   Role = "user"
    RoleGuest  Role = "guest"
)

// Использование:
currentRole := RoleAdmin
fmt.Println(currentRole)  // admin

// Сравнение ролей:
isAdmin := currentRole == RoleAdmin
fmt.Println(isAdmin)  // true</code></pre>
        </div>

        <div class="alert alert-tip">
            <div class="alert-icon">✓</div>
            <div class="alert-label">Tip</div>
            <p>Как использовать enum с <code>switch</code> - изучим в модуле условий. Как сделать красивый вывод enum (метод <code>String()</code>) - изучим в модуле интерфейсов.</p>
        </div>

        <!-- H2 #6 -->
        <h2 id="naming">Стиль именования</h2>

        <p>В Go принято именовать константы в camelCase или PascalCase (для экспортируемых):</p>

        <!-- Code block #21 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const maxRetries = 3        // локальная константа
const MaxConnections = 100  // экспортируемая константа</code></pre>
        </div>

        <p>Можно встретить и UPPER_CASE (как в других языках), но это не идиоматичный Go:</p>

        <!-- Code block #22 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">const MY_CONSTANT = 100  // ✅ работает, но не рекомендуется
const MyConstant = 100   // ✅ предпочтительно</code></pre>
        </div>

        <h3 id="local-const">Константы внутри функции</h3>

        <p>Константы можно объявлять не только на уровне пакета:</p>

        <!-- Code block #23 -->
        <div class="code-block">
            <div class="code-header">
                <span class="code-lang">Go</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code class="language-go">func main() {
    const maxAttempts = 3  // локальная константа - видна только здесь

    fmt.Println("Максимум попыток:", maxAttempts)
}</code></pre>
        </div>

        <p>Это удобно, когда константа нужна только в одной функции и не должна "загрязнять" пространство имён пакета.</p>

        <div class="alert alert-tip">
            <div class="alert-icon">✓</div>
            <div class="alert-label">Tip</div>
            <p>Как использовать константы в циклах - изучим в модуле циклов.</p>
        </div>

        <!-- H2 #7 -->
        <h2 id="practice">Проверь себя</h2>

        <h3 id="questions">Вопросы</h3>

        <!-- Question #1 -->
        <div class="card question-card">
            <div class="card-head">
                <span class="card-num">1</span>
                <span class="card-title">Чем отличается <code>const</code> от <code>var</code>?</span>
            </div>
            <div class="card-body">
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <p><code>const</code> создаёт неизменяемое значение - его нельзя изменить после объявления. <code>var</code> создаёт переменную, которую можно изменять. Константы вычисляются на этапе компиляции, переменные - во время выполнения.</p>
                    </div>
                </details>
            </div>
        </div>

        <!-- Question #2 -->
        <div class="card question-card">
            <div class="card-head">
                <span class="card-num">2</span>
                <span class="card-title">Что такое untyped constant и в чём её преимущество?</span>
            </div>
            <div class="card-body">
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <p>Untyped constant - константа без явного типа (<code>const x = 100</code>). Преимущество: она адаптируется к контексту использования. Можно присвоить <code>int</code>, <code>float64</code>, <code>int32</code> без явного преобразования. Типизированная константа (<code>const x int = 100</code>) требует точного совпадения типов.</p>
                    </div>
                </details>
            </div>
        </div>

        <!-- Question #3 -->
        <div class="card question-card">
            <div class="card-head">
                <span class="card-num">3</span>
                <span class="card-title">Что происходит с <code>iota</code> в каждом новом блоке <code>const</code>?</span>
            </div>
            <div class="card-body">
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <p><code>iota</code> сбрасывается в 0. Каждый блок <code>const ( ... )</code> начинает счёт с нуля.</p>
                    </div>
                </details>
            </div>
        </div>

        <!-- Question #4 -->
        <div class="card question-card">
            <div class="card-head">
                <span class="card-num">4</span>
                <span class="card-title">Какие типы данных можно хранить в константах?</span>
            </div>
            <div class="card-body">
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <p>Только скалярные значения: числа (<code>int</code>, <code>float64</code>), строки (<code>string</code>), булевы (<code>bool</code>). Нельзя хранить массивы, срезы, карты, структуры.</p>
                    </div>
                </details>
            </div>
        </div>

        <h3 id="tasks">Задачи</h3>

        <!-- Task #1 -->
        <div class="card task-card">
            <div class="card-head">
                <span class="card-num">1</span>
                <span class="card-title">HTTP статус-коды</span>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 12px;">Создай группу констант для HTTP статус-кодов:</p>
                <div class="code-block">
                    <pre><code class="language-go">// OK = 200
// Created = 201
// BadRequest = 400
// NotFound = 404
// InternalError = 500</code></pre>
                </div>
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <div class="code-block">
                            <pre><code class="language-go">const (
    StatusOK          = 200
    StatusCreated     = 201
    StatusBadRequest  = 400
    StatusNotFound    = 404
    StatusInternalError = 500
)</code></pre>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Task #2 -->
        <div class="card task-card">
            <div class="card-head">
                <span class="card-num">2</span>
                <span class="card-title">iota для размеров</span>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 12px;">Создай константы для размеров файлов с помощью iota:</p>
                <div class="code-block">
                    <pre><code class="language-go">// Byte = 1
// KB = 1024
// MB = 1048576
// GB = 1073741824</code></pre>
                </div>
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <div class="code-block">
                            <pre><code class="language-go">const (
    Byte = 1 << (10 * iota)  // 1
    KB                       // 1024
    MB                       // 1048576
    GB                       // 1073741824
)

// Или явнее:
const (
    _  = iota
    KB = 1 << (10 * iota)  // 1 << 10
    MB                     // 1 << 20
    GB                     // 1 << 30
)</code></pre>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Task #3 -->
        <div class="card task-card">
            <div class="card-head">
                <span class="card-num">3</span>
                <span class="card-title">Дни недели</span>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 12px;">Создай константы для дней недели, начиная с Monday = 1:</p>
                <div class="code-block">
                    <pre><code class="language-go">// Monday = 1
// Tuesday = 2
// ...
// Sunday = 7</code></pre>
                </div>
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <div class="code-block">
                            <pre><code class="language-go">const (
    _ = iota  // пропускаем 0
    Monday    // 1
    Tuesday   // 2
    Wednesday // 3
    Thursday  // 4
    Friday    // 5
    Saturday  // 6
    Sunday    // 7
)</code></pre>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Task #4 -->
        <div class="card task-card">
            <div class="card-head">
                <span class="card-num">4</span>
                <span class="card-title">Битовые флаги</span>
            </div>
            <div class="card-body">
                <p style="margin-bottom: 12px;">Создай константы для прав доступа к файлу: Read, Write, Execute. Затем создай переменную с правами "чтение и запись":</p>
                <div class="code-block">
                    <pre><code class="language-go">// Read = 1
// Write = 2
// Execute = 4</code></pre>
                </div>
                <details>
                    <summary>Показать ответ</summary>
                    <div class="answer">
                        <div class="code-block">
                            <pre><code class="language-go">const (
    Read    = 1 << iota  // 1
    Write               // 2
    Execute             // 4
)

// Комбинация: "чтение и запись"
permissions := Read | Write  // 3

// Проверка права (результат - bool)
hasRead := permissions & Read != 0     // true
hasExec := permissions & Execute != 0  // false

fmt.Println(hasRead, hasExec)  // true false</code></pre>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- H2 #8 -->
        <h2 id="when-use">Когда использовать константы?</h2>

        <table>
            <thead>
                <tr>
                    <th>Ситуация</th>
                    <th>Используй</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Неизменяемое значение</td><td><code>const</code></td></tr>
                <tr><td>Конфигурация (может измениться)</td><td>переменная</td></tr>
                <tr><td>Набор связанных значений</td><td><code>const ( ... )</code></td></tr>
                <tr><td>Автоинкремент</td><td><code>iota</code></td></tr>
                <tr><td>Битовые флаги</td><td><code>iota</code> с <code>&lt;&lt;</code></td></tr>
            </tbody>
        </table>

        <!-- H2 #9 -->
        <h2 id="summary">Резюме</h2>

        <ul>
            <li><code>const</code> создаёт неизменяемое значение</li>
            <li>Константы вычисляются на этапе компиляции</li>
            <li><code>iota</code> - счётчик для автоматической нумерации</li>
            <li><code>iota</code> сбрасывается в каждом новом блоке <code>const</code></li>
            <li>Константы без явного типа (untyped) - более гибкие</li>
            <li>В константах можно хранить только скалярные значения</li>
            <li>Создавай типизированные enum: <code>type Status int</code> + iota</li>
            <li>Константы можно объявлять внутри функций</li>
        </ul>

        <nav class="nav-footer">
            <a href="04-bool-zero-values.html" class="nav-link prev">
                <span class="nav-arrow">←</span>
                <div>
                    <div class="nav-label">Предыдущий урок</div>
                    <div class="nav-title">Bool и нулевые значения</div>
                </div>
            </a>
            <a href="06-operators.html" class="nav-link next">
                <div>
                    <div class="nav-label">Следующий урок</div>
                    <div class="nav-title">Операторы</div>
                </div>
                <span class="nav-arrow">→</span>
            </a>
        </nav>
    </main>

    <script>
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
            tg.BackButton.show();
            tg.BackButton.onClick(() => history.back());
        }

        /* global hljs */
        // noinspection JSUnresolvedReference
        hljs.highlightAll();

        function copyCode(btn) {
            const code = btn.closest('.code-block').querySelector('code');
            navigator.clipboard.writeText(code.textContent).then(() => {
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>
